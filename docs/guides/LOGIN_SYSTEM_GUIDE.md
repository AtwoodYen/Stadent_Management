# 學生管理系統 - 登入功能說明

## 功能概述

系統已成功整合登入認證功能，包含以下特色：

### ✅ 已完成的功能

1. **登入頁面**
   - 美觀的現代化 UI 設計
   - 帳號密碼輸入欄位
   - 即時錯誤訊息顯示
   - 載入狀態指示

2. **認證系統**
   - JWT Token 認證機制
   - 24小時有效期限
   - 安全的密碼驗證
   - 登入狀態持久化

3. **用戶管理**
   - 多用戶角色支援
   - 用戶資訊顯示
   - 登出功能

## 預設帳號

系統提供以下測試帳號：

| 帳號 | 密碼 | 角色 | 說明 |
|------|------|------|------|
| `admin` | `123456` | 系統管理員 | 完整系統權限 |
| `teacher` | `123456` | 小剛老師 | 教師權限 |
| `manager` | `123456` | 教務主任 | 管理權限 |

## 使用方式

### 1. 啟動系統

```bash
# 啟動後端和前端
npm run dev

# 或分別啟動
npm run server  # 後端 (port 3000)
npm run client  # 前端 (port 5173-5177)
```

### 2. 登入流程

1. 打開瀏覽器訪問前端網址
2. 系統會自動顯示登入頁面
3. 輸入帳號和密碼
4. 點擊「登入」按鈕
5. 登入成功後自動進入管理系統

### 3. 登出流程

1. 點擊右上角的「帳戶」按鈕
2. 選擇「登出」
3. 系統會自動返回登入頁面

## 技術實現

### 前端技術

- **React 19** + **TypeScript**
- **Material-UI** 組件庫
- **Context API** 狀態管理
- **localStorage** 持久化儲存

### 後端技術

- **Express.js** Web 框架
- **jsonwebtoken** JWT 認證
- **bcrypt** 密碼加密 (預留)
- **express-validator** 資料驗證

### API 端點

```
POST /api/auth/login     # 用戶登入
POST /api/auth/verify    # Token 驗證
POST /api/auth/logout    # 用戶登出
```

## 安全特性

1. **JWT Token 認證**
   - 24小時自動過期
   - 包含用戶身份資訊
   - 安全的簽名驗證

2. **前端保護**
   - 未登入自動跳轉
   - Token 過期處理
   - 安全的狀態管理

3. **後端驗證**
   - 請求頻率限制
   - 輸入資料驗證
   - 錯誤處理機制

## 自訂設定

### 修改預設帳號

編輯 `server.js` 中的 `validUsers` 陣列：

```javascript
const validUsers = [
    { id: 1, username: 'admin', password: '123456', name: '系統管理員', role: 'admin' },
    // 添加更多用戶...
];
```

### 設定 JWT 密鑰

建立 `.env` 檔案：

```env
JWT_SECRET=your-secret-key-here
```

### 修改 Token 有效期

在 `server.js` 中修改：

```javascript
const token = jwt.sign(payload, JWT_SECRET, { expiresIn: '24h' });
```

## 故障排除

### 1. 登入失敗
- 檢查帳號密碼是否正確
- 確認後端服務正在運行
- 查看瀏覽器 Console 錯誤訊息

### 2. Token 過期
- 重新登入即可
- 系統會自動清除過期 Token

### 3. 頁面無法載入
- 確認前後端服務都在運行
- 檢查端口是否被佔用
- 查看終端錯誤訊息

## 未來改進

1. **資料庫用戶管理**
   - 將用戶資料儲存到資料庫
   - 支援用戶註冊功能
   - 密碼重設機制

2. **權限控制**
   - 基於角色的頁面存取控制
   - 功能權限細分
   - API 權限驗證

3. **安全增強**
   - 密碼強度檢查
   - 登入嘗試限制
   - 雙因素認證

---

## 更新日誌

- **2025-06-29**: 完成基本登入認證系統
- 前端登入頁面設計完成
- 後端 JWT 認證 API 實現
- 用戶狀態管理整合
- 登出功能實現 